<!DOCTYPE html>
<html>
  <head>
    <title>Block Blast | GlitchedGoose()</title>
    
    <!-- Meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="./styles.css"/>
  </head>
  <body>
    <h1>Block Blast</h1>
    
    <div id="game-con">
      <div id="info-con">
        <div id='lines-cleared'><p>0</p></div>
        <div id='score'><p>0</p></div>
        <div id='combo'><p>0</p></div>
      </div>
      <canvas id="scene" width="280" height="280"></canvas>
      <div id="piece-chooser">
        <div class="piece-image-con">
          <button onclick="buttonClicked(1)">
            <canvas width="100%" height="100%"></canvas>
          </button>
        </div>
        <div class="piece-image-con">
          <button onclick="buttonClicked(2)">
            <canvas width="100%" height="100%"></canvas>
          </button>
        </div>
        <div class="piece-image-con">
          <button onclick="buttonClicked(3)">
            <canvas width="100%" height="100%"></canvas>
          </button>
        </div>
      </div>
    </div>
    
    <h3>A game by <a class="attribution" target="_blank" rel="noopener noreferrer" href="https://glitchedgoose.com/">GlitchedGoose()</a></h3>
    <h4><a class="attribution" style="color: #338faa;" target="_blank" rel="noopener noreferrer" href="https://github.com/MisterAvery">Github</a></h4>
    
    <script src="./scripts/globals.js"></script>
    <script src="./scripts/block.js"></script>
    <script src="./scripts/board.js"></script>
    <script src="./scripts/main.js"></script>
    <script>
      window.onload = () => {
        // initalize the value of the DOM elemet variables
        canvas = document.getElementById("scene");
        pieceSelectorCanvases = document.querySelectorAll(".piece-image-con canvas");
        
        ctx = canvas.getContext("2d");
        pieceSelectorCtxs = [];
        
        pieceSelectorCanvases.forEach(element => pieceSelectorCtxs.push(element.getContext("2d")));
        
        scoreBox = document.querySelector("#score > p");
        comboBox = document.querySelector("#combo > p");
        linesClearedBox = document.querySelector("#lines-cleared > p");
        imageButtons = document.querySelectorAll(".image-con > button");
        
        setup();
        loop();
      }
    </script>
  </body>
</html>